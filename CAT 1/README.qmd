---
title: "CAT 1"
subtitle: "Database Design"
author: Alejandro PÃ©rez Bueno
date: today
date-format: "MMM DD, YYYY"
toc: true
toc-title: "Table of Contents"
linkcolor: blue
documentclass: report
link-citations: true
link-bibliography: true
format:
  gfm: default
  pdf:
    linestretch: 1.25
    code-overflow: wrap
    keep-tex: true
    geometry:
      - top=15mm
      - left=7mm
      - heightrounded
    include-in-header:
      text: |
        \usepackage{fancyhdr}
          \pagestyle{fancy}
          \fancyhead[C]{UOC}
          \fancyhead[R]{aperez-b@uoc.edu}
          \fancyfoot{}
          \fancyfoot[C]{\thepage}
        \usepackage{fvextra}
        \DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,commandchars=\\\{\}}
        \DefineVerbatimEnvironment{OutputCode}{Verbatim}{breaklines,commandchars=\\\{\}}
---

{{< pagebreak >}}

## Exercise 1

![UML Class Diagram](./img/ex1.png)

Following the class diagram, here are a few assumptions made:

* The `name` attribute for all the classes that have it has been assumed to be unique, that is why in the diagram all of them are marked with `<U1>`.
* As stated in the diagram, the number of available spaces in a `Base` could be calculated from existing properties.

## Exercise 2

![UML Class diagram](./img/ex2.png)

Assumptions made for this updated diagram:

* The `Rental` entity is a weak entity because its instances are identified by a partial key (`sequentialNumber`) and their relationship to a `User` entity.
* The `User` entity has two candidate keys `username` and `email`, both of which must be unique across all users.
* The cardinalities reflect that a `User` may have never made a rental, a `Bicycle` may have never been rented, and a `Base` may have never been the origin or destination of any rental.

## Exercise 3

![UML Class Diagram](./img/ex3.png)

Assumptions made:

* The mauin change is the introduction of the `Person` superclass to avoid redundancy and correctly model the domain, where both users and employees are types of people with shared characteristics.
* The composite primary key for `Recharge` (`employee_id_number`, `bicycle_code`, `rechargeTime`) follows the constraint that at any given moment a bicycle can only be recharged by a single employee, and an employee at any given moment can only perform the recharge of one bicycle. This structure ensures that the combination of `bicycle_code` and `rechargeTime` is unique, as is the combination of `employee_id_number` and `rechargeTime`.

## Exercise 4

![UML Class Diagram](./img/ex4.png)

## Exercise 5

Here is a screenshot proving the setup is properly installed:

![pgAdmin 4 Query Result](./img/ex5.png)
